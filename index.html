<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è€å»¢ã„‰è¼ªç›¤</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: linear-gradient(135deg,#4b6491,#3d8af7);
    padding: 50px;
    box-sizing: border-box;
  }
  h1 { margin-bottom: 20px; }
  /* æŒ‡é‡ç®­é ­ */
  #pointer {
    position: relative;
    width: 0;
    height: 0;
    margin: 0 auto -25px;
    border-left: 18px solid transparent;
    border-right: 18px solid transparent;
    border-bottom: 28px solid #e8290f;
    /* topèª¿æ•´ç‚º10pxä½¿ç®­é ­é è¿‘åœ“ç›¤ */
    top: 400px;
    z-index: 10;
  }
  canvas {
    width: 90vw;
    max-width: 400px;
    height: auto;
    aspect-ratio: 1 / 1;
    display: block;
    margin: 0 auto 25px;
    border: 8px solid #333;
    border-radius: 50%;
  }
  button {
    padding: 10px 22px;
    font-size: 16px;
    cursor: pointer;
    background: #333;
    color: #fff;
    border: none;
    border-radius: 6px;
    margin-bottom: 20px;
    font-family: Arial, sans-serif;
    width: 90vw;
    max-width: 180px;
  }
  ul {
    text-align: left;
    max-width: 360px;
    margin: 20px auto;
    padding: 0;
    list-style: none;
    font-family: Arial, sans-serif;
    font-size: 14px;
    word-break: break-all;
  }
  li {
    margin: 4px 0;
    padding-left: 1em;
    text-indent: -1em;
  }
</style>
</head>
<body>
<h1>ğŸ¯ è€å»¢ã„‰è¼ªç›¤ ğŸ¯</h1>

<!-- å›ºå®šç®­é ­ -->
<div id="pointer"></div>

<canvas id="wheel"></canvas>
<button onclick="spin()">é–‹å§‹è½‰ï¼</button>

<h2>å…¨éƒ¨é¸é …</h2>
<ul id="taskList">
  <li>ç¡è¦º</li>
  <li>å»æ´—æ¾¡</li>
  <li>çœ‹ meme</li>
  <li>æ»‘æ‰‹æ©Ÿ</li>
  <li>å»åƒå®µå¤œ</li>
  <li>è·³ä¸€é¦–èˆ</li>
  <li>ä¸åŒ–å¦ä¸€æ•´å¤©</li>
  <li>è³¼ç‰©è»Šæ¸…ç©º</li>
  <li>å»ä¾¿åˆ©å•†åº—è²·ä¸€å¤§å †é›¶é£Ÿ</li>
  <li>æ•¸ 10 éš»ç¶¿ç¾Š</li>
  <li>è½ä¸€é¦–è¦ºå¾—å¥½ç¬‘å»æ²’æœ‰æ„ç¾©çš„æ­Œ</li>
  <li>å»è¿½ä¸€é›†æƒ³çœ‹çš„å½±é›†</li>
  <li>ç©ºæƒ³æˆ‘æœ‰éŒ¢çš„æ™‚å€™æˆ‘è¦èººåœ¨å®¶</li>
  <li>å–æ°´ 100ml</li>
  <li>å°é›»é¢¨æ‰‡å”±æ­Œ</li>
  <li>ä¸è¬›è©±ä¸€å¤©ï¼Œåªç”¨è¡¨æƒ…è¬›è©±</li>
  <li>è«‹å‡ä¸€å¤©</li>
  <li>ç¿¹èª²ä¸€å¤©</li>
  <li>é€ƒèª²ä¸€ç¯€</li>
  <li>ä¸æ¥åŒå­¸ã€è€é—†çš„é›»è©±ä¸€å¤©</li>
  <li>æ‡·èˆŠä¸€å¤©</li>
</ul>

<script>
const tasks = Array.from(document.querySelectorAll('#taskList li')).map(li => li.textContent);
const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');

function randomColor(i){
  const colors = ['#FF9999','#99CCFF','#99FF99','#FFCC99','#CCCCFF',
                  '#FFD700','#FFA07A','#90EE90','#87CEFA'];
  return colors[i % colors.length];
}

// å‹•æ…‹èª¿æ•´canvaså¤§å°
function resizeCanvas() {
  const size = Math.min(window.innerWidth * 0.9, 400);
  canvas.width = size;
  canvas.height = size;
  return size;
}

let rotation = 0;

function drawWheel(){
  const size = resizeCanvas();
  const center = size / 2;
  const slice = 2 * Math.PI / tasks.length;

  ctx.clearRect(0, 0, size, size);

  for(let i=0; i<tasks.length; i++){
    const angle = slice * i + rotation;
    ctx.beginPath();
    ctx.moveTo(center, center);
    ctx.arc(center, center, center - 0.012 * size, angle, angle + slice);
    ctx.fillStyle = randomColor(i);
    ctx.fill();
    ctx.stroke();

    // æ–‡å­—
    ctx.save();
    ctx.translate(center, center);
    ctx.rotate(angle + slice / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#000";
    ctx.font = (size * 0.03) + "px Arial"; // ç›¸å°å­—é«”å¤§å°
    ctx.fillText(tasks[i], center - size * 0.025, size * 0.01);
    ctx.restore();
  }
}

function spin(){
  const spinDeg = Math.random() * 360 + 360 * 10;
  const spinRad = spinDeg * Math.PI / 180;
  const duration = 4000;
  const start = performance.now();

  function animate(now){
    const progress = Math.min((now - start) / duration, 1);
    const ease = 1 - Math.pow(1 - progress, 3);
    rotation = spinRad * ease;
    drawWheel();
    if(progress < 1){
      requestAnimationFrame(animate);
    } else {
      const deg = rotation * 180 / Math.PI % 360;
      const index = tasks.length - Math.floor((deg / 360) * tasks.length) - 1;
      alert("ä»Šå¤©å°±è¦ğŸ˜ï¼šã€Œ" + tasks[(index + tasks.length) % tasks.length] + "ã€");
    }
  }
  requestAnimationFrame(animate);
}

drawWheel();

window.addEventListener('resize', drawWheel); // çª—å£å¤§å°æ”¹è®Šæ™‚é‡ç•«
</script>
</body>
</html>
